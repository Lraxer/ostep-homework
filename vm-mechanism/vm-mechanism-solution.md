# vm-mechanism-solution

## Simulation

1. Run with seeds 1, 2, and 3, and compute whether each virtual address generated by the process is in or out of bounds. If in bounds, compute the translation.

   以 `relocation.py -s 1` 为例：

   ```
   ARG seed 1
   ARG address space size 1k
   ARG phys mem size 16k
   
   Base-and-Bounds register information:
   
     Base   : 0x0000363c (decimal 13884)
     Limit  : 290
   
   Virtual Address Trace
     VA  0: 0x0000030e (decimal:  782) --> PA or segmentation violation?
     VA  1: 0x00000105 (decimal:  261) --> PA or segmentation violation?
     VA  2: 0x000001fb (decimal:  507) --> PA or segmentation violation?
     VA  3: 0x000001cc (decimal:  460) --> PA or segmentation violation?
     VA  4: 0x0000029b (decimal:  667) --> PA or segmentation violation?
   
   For each virtual address, either write down the physical address it translates to
   OR write down that it is an out-of-bounds address (a segmentation violation). For
   this problem, you should assume a simple virtual address space of a given size.
   ```

   这里面并不是每个段一个寄存器，因此直接比较一下 VA (virtual address) 和 Limit 就知道是不是合法的 PA 了。这里面只有 VA 1 是合法的。

2. Run with these flags: `-s 0 -n 10`. What value do you have set `-l` (the bounds register) to in order to ensure that all the generated virtual addresses are within bounds?

   ```
   ARG seed 0
   ARG address space size 1k
   ARG phys mem size 16k
   
   Base-and-Bounds register information:
   
     Base   : 0x00003082 (decimal 12418)
     Limit  : 472
   
   Virtual Address Trace
     VA  0: 0x000001ae (decimal:  430) --> PA or segmentation violation?
     VA  1: 0x00000109 (decimal:  265) --> PA or segmentation violation?
     VA  2: 0x0000020b (decimal:  523) --> PA or segmentation violation?
     VA  3: 0x0000019e (decimal:  414) --> PA or segmentation violation?
     VA  4: 0x00000322 (decimal:  802) --> PA or segmentation violation?
     VA  5: 0x00000136 (decimal:  310) --> PA or segmentation violation?
     VA  6: 0x000001e8 (decimal:  488) --> PA or segmentation violation?
     VA  7: 0x00000255 (decimal:  597) --> PA or segmentation violation?
     VA  8: 0x000003a1 (decimal:  929) --> PA or segmentation violation?
     VA  9: 0x00000204 (decimal:  516) --> PA or segmentation violation?
   
   For each virtual address, either write down the physical address it translates to
   OR write down that it is an out-of-bounds address (a segmentation violation). For
   this problem, you should assume a simple virtual address space of a given size.
   ```

   设置为比 VA 里面最大的那个（`929`）还大的就可以了。

3. Run with these flags: `-s 1 -n 10 -l 100`. What is the maximum value that base can be set to, such that the address space still fits into physical memory in its entirety?

   由于物理内存默认大小是 16KB ，因此保证 `base+bound<=16KB` 即可。
   $$
   \mathrm{Base}_{max} = 16 \times 1024 - 100 = 16284
   $$

4. Run some of the same problems above, but with larger address spaces (`-a`) and physical memories (`-p`).

   略。

5. What fraction of randomly-generated virtual addresses are valid, as a function of the value of the bounds register? Make a graph from running with different random seeds, with limit values ranging from 0 up to the maximum size of the address space.

   略。